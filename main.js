!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(e,r){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"_showInputError",(function(e,t){var n=o._formElement.querySelector("#".concat(e.id,"-error"));e.classList.add(o._inputErrorClass),n.classList.add(o._errorClass),n.textContent=t})),t(this,"_hideInputError",(function(e){var t=o._formElement.querySelector("#".concat(e.id,"-error"));e.classList.remove(o._inputErrorClass),t.classList.remove(o._errorClass),t.textContent=""})),t(this,"_isValid",(function(e){e.validity.valid?o._hideInputError(e):o._showInputError(e,e.validationMessage)})),t(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),t(this,"_toggleButtonState",(function(){o._hasInvalidInput(o._inputList)?(o._buttonElement.classList.add(o._inactiveButtonClass),o._buttonElement.disabled=!0):(o._buttonElement.classList.remove(o._inactiveButtonClass),o._buttonElement.disabled=!1)})),t(this,"_setEventListeners",(function(){o._inputList.forEach((function(e){e.addEventListener("input",(function(){o._isValid(e),o._toggleButtonState()}))}))})),t(this,"enableValidation",(function(){o._formElement.addEventListener("submit",(function(e){e.preventDefault()})),o._setEventListeners()})),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=r,this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}var r,o;return r=n,(o=[{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&e(r.prototype,o),n}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderer",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"addCards",value:function(e){this._container.append(e)}}])&&r(t.prototype,n),e}();function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("modal_open"),document.addEventListener("keyup",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keyup",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("modal_open")||t.target.classList.contains("modal__close-icon"))&&e.close()}))}}])&&i(t.prototype,n),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t._popupElement.querySelector(".image-expand__image"),t._title=t._popupElement.querySelector(".image-expand__title"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._image.src=t,this._title.textContent=n,this._image.setAttribute("alt",n),c(d(a.prototype),"open",this).call(this)}}])&&s(t.prototype,n),a}(a);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(r);if(o){var n=b(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return v(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit,o=e.submitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._inputList=t._popupElement.querySelectorAll(".edit-box__input"),t._formElement=t._popupElement.querySelector(".edit-box"),t._submitButton=o,t}return t=a,(n=[{key:"close",value:function(){m(b(a.prototype),"close",this).call(this),this.renderLoading(!1),this._formElement.reset()}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Saving...":this._submitButton.dataset.textcontent}},{key:"setEventListeners",value:function(){var e=this;m(b(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit(e._getInputValues())}))}}])&&p(t.prototype,n),a}(a);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){var n=t.userName,r=t.userDescription,o=t.userAvatar,i=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userNameElement=n,this._userDescriptionElement=r,this._userId=i,this._userAvatar=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{userName:this._userNameElement.textContent,userDescription:this._userDescriptionElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.username,n=e.userdescription;this._userNameElement.textContent=t,this._userDescriptionElement.textContent=n}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e}}])&&k(t.prototype,n),e}();function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_returnRes",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getCardList",value:function(){var e=this;return fetch(this._baseUrl+"/cards",{method:"GET",headers:this._headers}).then((function(t){return e._returnRes(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch(this._baseUrl+"/users/me",{method:"GET",headers:this._headers}).then((function(t){return e._returnRes(t)}))}},{key:"setUserInfo",value:function(e){var t=this,n=e.name,r=e.about;return fetch(this._baseUrl+"/users/me",{method:"PATCH",headers:this._headers,body:JSON.stringify({name:n,about:r})}).then((function(e){return t._returnRes(e)}))}},{key:"addCard",value:function(e){var t=this,n=e.name,r=e.link;return fetch(this._baseUrl+"/cards",{method:"POST",headers:this._headers,body:JSON.stringify({name:n,link:r})}).then((function(e){return t._returnRes(e)}))}},{key:"removeCard",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._returnRes(e)}))}},{key:"setUserAvatar",value:function(e){var t=this;return fetch(this._baseUrl+"/users/me/avatar",{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then((function(e){return t._returnRes(e)}))}},{key:"addLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"PUT",headers:this._headers}).then((function(e){return t._returnRes(e)}))}},{key:"removeLike",value:function(e){var t=this;return fetch(this._baseUrl+"/cards/likes/"+e,{method:"DELETE",headers:this._headers}).then((function(e){return t._returnRes(e)}))}}])&&S(t.prototype,n),e}();function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(t,n){var r=t.data,o=t.handleCardClick,i=t.handleDeleteClick,a=t.handleLikeAdd,u=t.handleLikeDelete,s=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._template=n,this._id=r._id,this._ownerId=r.owner._id,this._user=s,this._handleCardClick=o,this._handleDeleteClick=i,this._handleLikeAdd=a,this._handleLikeDelete=u,this._likesArray=r.likes,this._cardLikes=r.likes.length}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._template).content.querySelector(".image-card").cloneNode(!0)}},{key:"addHeart",value:function(){var e=this._element.querySelector(".image-card__heart"),t=this._element.querySelector(".image-card__heart-number");e.classList.add("image-card__heart_liked"),t.textContent=this._likesArray.length}},{key:"removeHeart",value:function(){var e=this._element.querySelector(".image-card__heart"),t=this._element.querySelector(".image-card__heart-number");e.classList.remove("image-card__heart_liked"),t.textContent=this._likesArray.length,0===this._cardLikes&&(t.textContent="")}},{key:"deleteImage",value:function(){this._element.querySelector(".image-card__trash").closest(".image-card").remove()}},{key:"updateLikes",value:function(e){return this._likesArray=e}},{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".image-card__heart").addEventListener("click",(function(){e._likesArray.some((function(t){return t._id===e._user}))?e._handleLikeDelete({id:e._id}):e._handleLikeAdd({id:e._id})})),this._element.querySelector(".image-card__trash").addEventListener("click",(function(){e._handleDeleteClick({id:e._id})})),this._element.querySelector(".image-card__image").addEventListener("click",(function(){return e._handleCardClick({name:e._name,link:e._link})})),this._ownerId!==this._user&&this._element.querySelector(".image-card__trash").remove()}},{key:"generateCard",value:function(){var e=this;this._element=this._getTemplate(),this._setEventListeners();var t=this._element.querySelector(".image-card__image");return this._element.querySelector(".image-card__title").textContent=this._name,t.src=this._link,t.setAttribute("alt",this._name),this._cardLikes>0?this._element.querySelector(".image-card__heart-number").textContent=this._cardLikes:this._element.querySelector(".image-card__heart-number").textContent="",this._likesArray.some((function(t){return t._id===e._user}))?this._element.querySelector(".image-card__heart").classList.add("image-card__heart_liked"):this._element.querySelector(".image-card__heart").classList.remove("image-card__heart_liked"),this._element}}])&&C(t.prototype,n),e}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t,n){return(q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(r);if(o){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit,o=e.submitButton;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._handleFormSubmit=r,t._submitButton=o,t}return t=a,(n=[{key:"close",value:function(){q(R(a.prototype),"close",this).call(this),this.renderLoading(!1)}},{key:"setSubmitAction",value:function(e){this._handleFormSubmit=e}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Deleting...":this._submitButton.dataset.textcontent}},{key:"setEventListeners",value:function(){var e=this;q(R(a.prototype),"setEventListeners",this).call(this),this._popupElement.querySelector(".edit-box__button").addEventListener("click",(function(t){t.preventDefault(),e.renderLoading(!0),e._handleFormSubmit()}))}}])&&x(t.prototype,n),a}(a),B=document.querySelector(".profile__title"),A=document.querySelector(".profile__subtitle"),U=document.querySelector(".profile__image"),D=document.querySelector(".profile__button-edit"),T=document.querySelector(".profile__button-add"),V=document.querySelector(".edit-box__input_type_title"),N=document.querySelector(".edit-box__input_type_description"),F=document.querySelector(".edit-box_type_profile"),H=document.querySelector(".edit-box_type_image"),J=document.querySelector(".edit-box_type_profile-image"),G=document.querySelector(".profile__image-overlay"),z=(document.querySelector(".edit-box__button"),document.querySelector(".edit-box__button_add")),M=document.querySelector(".edit-box__button_delete-card"),K=document.querySelector(".edit-box__button_edit"),Q=document.querySelector(".edit-box__button_profile-image"),W={formSelector:".edit-box",fieldsetSelector:".edit-box__set",inputSelector:".edit-box__input",submitButtonSelector:".edit-box__button",inactiveButtonClass:"edit-box__button_inactive",inputErrorClass:"edit-box__input_type_error",errorClass:"edit-box__input-error_active"},X=new n(W,F),Y=new n(W,H),Z=new n(W,J);X.enableValidation(),Y.enableValidation(),Z.enableValidation();var $=new h(".image-expand");$.setEventListeners();var ee=new g({popupSelector:".modal_type_edit",handleFormSubmit:function(e){ne.setUserInfo({name:e.username,about:e.userdescription}).then((function(){te.setUserInfo({username:e.username,userdescription:e.userdescription}),ee.close()})).catch((function(e){return console.log(e)}))},submitButton:K});ee.setEventListeners();var te=new E({userName:B,userDescription:A,userAvatar:U});D.addEventListener("click",(function(){var e=te.getUserInfo(),t=e.userName,n=e.userDescription;V.value=t,N.value=n,ee.open(),X.resetValidation()}));var ne=new L({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"bf6a8c78-b245-4594-801d-fa3b505682c7","Content-Type":"application/json"}});ne.getUserInfo().then((function(e){te.setUserInfo({username:e.name,userdescription:e.about}),te.setUserAvatar(e.avatar),te.userId=e._id})).then((function(){ne.getCardList().then((function(e){var t=new o({items:e,renderer:function(e){var n=ie(e);t.addCards(n)}},".image-grid");t.renderer();var n=new g({popupSelector:".modal_type_add",handleFormSubmit:function(e){ne.addCard(e).then((function(e){var r=ie(e);t.addItem(r),n.close()})).catch((function(e){return console.log(e)}))},submitButton:z});n.setEventListeners(),T.addEventListener("click",(function(){n.open(),Y.resetValidation()}))})).catch((function(e){return console.log(e)}))})).catch((function(e){return console.log(e)}));var re=new g({popupSelector:".modal_type_profile-image",handleFormSubmit:function(e){var t=e.profileimage;ne.setUserAvatar(t).then((function(){te.setUserAvatar(t),re.close()})).catch((function(e){return console.log(e)}))},submitButton:Q});re.setEventListeners(),G.addEventListener("click",(function(){re.open(),Z.resetValidation()}));var oe=new I({popupSelector:".modal_type_delete-card",submitButton:M});function ie(e){var t=new w({data:e,handleCardClick:function(e){var t=e.link,n=e.name;$.open({link:t,name:n})},handleDeleteClick:function(e){var n=e.id;oe.open(),oe.setSubmitAction((function(){ne.removeCard(n).then((function(){oe.close(),t.deleteImage()})).catch((function(e){return console.log(e)}))}))},handleLikeAdd:function(e){var n=e.id;ne.addLike(n).then((function(e){t.updateLikes(e.likes),t.addHeart()})).catch((function(e){return console.log(e)}))},handleLikeDelete:function(e){var n=e.id;ne.removeLike(n).then((function(e){t.updateLikes(e.likes),t.removeHeart()})).catch((function(e){return console.log(e)}))},userId:te.userId},"#image-card-template");return t.generateCard()}oe.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cERlbGV0ZUltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwibmFtZXMiOlsiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJpbnB1dEVsZW1lbnQiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJfZm9ybUVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJfaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiX2lucHV0TGlzdCIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2lzVmFsaWQiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJkb2N1bWVudCIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImFwcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9pbWFnZSIsIl90aXRsZSIsImxpbmsiLCJuYW1lIiwic3JjIiwic2V0QXR0cmlidXRlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdWJtaXRCdXR0b24iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9zdWJtaXRCdXR0b24iLCJyZW5kZXJMb2FkaW5nIiwicmVzZXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJpc0xvYWRpbmciLCJkYXRhc2V0IiwidGV4dGNvbnRlbnQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckRlc2NyaXB0aW9uIiwidXNlckF2YXRhciIsInVzZXJJZCIsIl91c2VyTmFtZUVsZW1lbnQiLCJfdXNlckRlc2NyaXB0aW9uRWxlbWVudCIsIl91c2VySWQiLCJfdXNlckF2YXRhciIsImRhdGEiLCJ1c2VybmFtZSIsInVzZXJkZXNjcmlwdGlvbiIsImF2YXRhciIsIkFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfcmV0dXJuUmVzIiwiYWJvdXQiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmRJZCIsIkNhcmQiLCJ0ZW1wbGF0ZSIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUFkZCIsImhhbmRsZUxpa2VEZWxldGUiLCJfbmFtZSIsIl9saW5rIiwiX3RlbXBsYXRlIiwiX2lkIiwiX293bmVySWQiLCJvd25lciIsIl91c2VyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQWRkIiwiX2hhbmRsZUxpa2VEZWxldGUiLCJfbGlrZXNBcnJheSIsImxpa2VzIiwiX2NhcmRMaWtlcyIsImxlbmd0aCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJoZWFydEJ1dHRvbiIsIl9lbGVtZW50IiwiaGVhcnROdW1iZXIiLCJjbG9zZXN0IiwicmVzQXJyYXkiLCJsaWtlIiwiX2dldFRlbXBsYXRlIiwiaW1hZ2VDYXJkSW1hZ2UiLCJQb3B1cERlbGV0ZUltYWdlIiwiYWN0aW9uIiwicHJvZmlsZVRpdGxlIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUltYWdlIiwib3BlbkVkaXRGb3JtQnV0dG9uIiwib3BlbkFkZEZvcm1CdXR0b24iLCJpbnB1dFRpdGxlIiwiaW5wdXREZXNjcmlwdGlvbiIsImZvcm1Qcm9maWxlIiwiZm9ybUltYWdlIiwiZm9ybVByb2ZpbGVJbWFnZSIsInByb2ZpbGVJbWFnZU92ZXJsYXkiLCJhZGRDYXJkU3VibWl0QnV0dG9uIiwiZGVsZXRlQ2FyZFN1Ym1pdEJ1dHRvbiIsImVkaXRQcm9maWxlU3VibWl0QnV0dG9uIiwicHJvZmlsZUltYWdlU3VibWl0QnV0dG9uIiwiZm9ybVNlbGVjdG9yIiwiZmllbGRzZXRTZWxlY3RvciIsInByb2ZpbGVNb2RhbFZhbGlkYXRvciIsImltYWdlTW9kYWxWYWxpZGF0b3IiLCJwcm9maWxlSW1hZ2VNb2RhbFZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJpbWFnZVBvcHVwIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlZGl0UG9wdXAiLCJhcGkiLCJzZXRVc2VySW5mbyIsIm5ld1VzZXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJnZXRVc2VySW5mbyIsIm9wZW4iLCJyZXNldFZhbGlkYXRpb24iLCJhdXRob3JpemF0aW9uIiwic2V0VXNlckF2YXRhciIsImdldENhcmRMaXN0IiwiY2FyZHNMaXN0IiwiY2FyZEVsZW1lbnQiLCJjcmVhdGVDYXJkIiwiYWRkQ2FyZHMiLCJhZGRDYXJkUG9wdXAiLCJhZGRDYXJkIiwibmV3Q2FyZEVsZW1lbnQiLCJhZGRJdGVtIiwicHJvZmlsZUltYWdlUG9wdXAiLCJwcm9maWxlaW1hZ2UiLCJkZWxldGVDYXJkUG9wdXAiLCJjYXJkIiwic2V0U3VibWl0QWN0aW9uIiwicmVtb3ZlQ2FyZCIsImRlbGV0ZUltYWdlIiwiYWRkTGlrZSIsInVwZGF0ZUxpa2VzIiwiYWRkSGVhcnQiLCJyZW1vdmVMaWtlIiwicmVtb3ZlSGVhcnQiLCJnZW5lcmF0ZUNhcmQiXSwibWFwcGluZ3MiOiIyVEFFcUJBLEUsV0FDakIsV0FBWUMsRUFBVUMsR0FBYSxZLDRGQUFBLG1DQWNqQixTQUFDQyxFQUFjQyxHQUM3QixJQUFNQyxFQUFlLEVBQUtDLGFBQWFDLGNBQWxCLFdBQW9DSixFQUFhSyxH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USxpQkFFUjdCLE9BQU0sU0FBQ0MsR0FBRCxPQUFTQyxRQUFRQyxJQUFJRixPQUVwQzFGLE9BQVF3RixHQUFReEYsUUQ3SlMsd0JDK0o3QixPQUFPOEcsRUFBS1MsZUF0Q2hCVixHQUFnQnpCLG9CIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgICAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICAgICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgICAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGlvbiBGdW5jdGlvbnMgLy9cblxuICAgIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgfTtcblxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9O1xuXG4gICAgX2lzVmFsaWQgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudClcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4ge1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfTsgIC8vZW5hYmxlXG5cbn1cblxuXG5cblxuXG5cbiIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICByZW5kZXJlcigpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICAgIH1cblxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG5cbiAgICBhZGRDYXJkcyhlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfVxuXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlblwiKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuXCIpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9vcGVuJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX19jbG9zZS1pY29uJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICB9XG5cbn1cblxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjsgXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtZXhwYW5kX19pbWFnZVwiKTtcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1leHBhbmRfX3RpdGxlXCIpO1xuICAgIH1cblxuICAgIG9wZW4oe2xpbmssIG5hbWV9KSB7XG4gICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2Uuc2V0QXR0cmlidXRlKFwiYWx0XCIsIG5hbWUpO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCwgc3VibWl0QnV0dG9uIH0pIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5lZGl0LWJveF9faW5wdXRcIik7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1ib3hcIik7XG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbjtcbiAgICB9XG4gICAgXG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XG4gICAgfVxuXG5cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuXG4gICAgcmVuZGVyTG9hZGluZyhpc0xvYWRpbmcpIHtcbiAgICAgICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZpbmcuLi5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi5kYXRhc2V0LnRleHRjb250ZW50O1xuICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTsgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pXG4gICAgfVxuXG5cbn0gLyogUG9wdXBXaXRoZm9ybSBjbGFzcyAqL1xuXG5cblxuXG5cbiIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICAgIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJEZXNjcmlwdGlvbiwgdXNlckF2YXRhciwgdXNlcklkIH0pIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWVFbGVtZW50ID0gdXNlck5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJEZXNjcmlwdGlvbkVsZW1lbnQgPSB1c2VyRGVzY3JpcHRpb247XG4gICAgICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5fdXNlckF2YXRhciA9IHVzZXJBdmF0YXI7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICAgICAgdXNlckRlc2NyaXB0aW9uOiB0aGlzLl91c2VyRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgICAgICBjb25zdCB7dXNlcm5hbWUsIHVzZXJkZXNjcmlwdGlvbn0gPSBkYXRhO1xuICAgICAgICB0aGlzLl91c2VyTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSB1c2VybmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckRlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IHVzZXJkZXNjcmlwdGlvbjtcbiAgICB9XG5cbiAgICBzZXRVc2VyQXZhdGFyKGF2YXRhcikge1xuICAgICAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGF2YXRhcjtcbiAgICB9XG5cblxufVxuXG4gIiwiXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gICAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICAgICAgdGhpcy5fYmFzZVVybCA9IGJhc2VVcmw7XG4gICAgICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICAgIH1cblxuICAgIF9yZXR1cm5SZXMocmVzKSB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0Q2FyZExpc3QoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcycsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZXR1cm5SZXMocmVzKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZScsIHtcbiAgICAgICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgIGFib3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIGFkZENhcmQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICAgICAgcmV0dXJuIGZldGNoKHRoaXMuX2Jhc2VVcmwgKyAnL2NhcmRzJywge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgICBsaW5rXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIHJlbW92ZUNhcmQoY2FyZElkKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy9jYXJkcy8nICsgY2FyZElkLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XG4gICAgICAgICAgICB9KVxuICAgIH1cblxuICAgIHNldFVzZXJBdmF0YXIoYXZhdGFyKSB7XG4gICAgICAgIHJldHVybiBmZXRjaCh0aGlzLl9iYXNlVXJsICsgJy91c2Vycy9tZS9hdmF0YXInLCB7XG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgYXZhdGFyOiBhdmF0YXIsXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcmV0dXJuUmVzKHJlcyk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cblxuXG5cbiAgICBhZGRMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMvbGlrZXMvJyArIGNhcmRJZCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblJlcyhyZXMpO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZW1vdmVMaWtlKGNhcmRJZCkge1xuICAgICAgICByZXR1cm4gZmV0Y2godGhpcy5fYmFzZVVybCArICcvY2FyZHMvbGlrZXMvJyArIGNhcmRJZCwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JldHVyblJlcyhyZXMpO1xuICAgICAgICAgICAgfSlcbiAgICB9XG5cblxuXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gICAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQWRkLCBoYW5kbGVMaWtlRGVsZXRlLCB1c2VySWQsIH0sIHRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XG4gICAgICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuX2lkID0gZGF0YS5faWQ7XG4gICAgICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICAgICAgdGhpcy5fdXNlciA9IHVzZXJJZDtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQWRkID0gaGFuZGxlTGlrZUFkZDtcbiAgICAgICAgdGhpcy5faGFuZGxlTGlrZURlbGV0ZSA9IGhhbmRsZUxpa2VEZWxldGU7XG4gICAgICAgIHRoaXMuX2xpa2VzQXJyYXkgPSBkYXRhLmxpa2VzO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZXMgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICB9XG5cbiAgICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlKVxuICAgICAgICAgICAgLmNvbnRlbnRcbiAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWNhcmRcIilcbiAgICAgICAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH1cblxuXG4gICAgLy8gVG9nZ2xlIEhlYXJ0cyAvL1xuXG4gICAgYWRkSGVhcnQoKSB7XG4gICAgICAgIGNvbnN0IGhlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWNhcmRfX2hlYXJ0XCIpO1xuICAgICAgICBjb25zdCBoZWFydE51bWJlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1jYXJkX19oZWFydC1udW1iZXJcIik7XG5cbiAgICAgICAgaGVhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcImltYWdlLWNhcmRfX2hlYXJ0X2xpa2VkXCIpO1xuICAgICAgICBoZWFydE51bWJlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQXJyYXkubGVuZ3RoO1xuICAgIH07XG5cbiAgICByZW1vdmVIZWFydCgpIHtcbiAgICAgICAgY29uc3QgaGVhcnRCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtY2FyZF9faGVhcnRcIik7XG4gICAgICAgIGNvbnN0IGhlYXJ0TnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWNhcmRfX2hlYXJ0LW51bWJlclwiKTtcblxuICAgICAgICBoZWFydEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiaW1hZ2UtY2FyZF9faGVhcnRfbGlrZWRcIik7XG5cblxuICAgICAgICBoZWFydE51bWJlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzQXJyYXkubGVuZ3RoO1xuICAgICAgICBpZiAodGhpcy5fY2FyZExpa2VzID09PSAwKSB7XG4gICAgICAgICAgICBoZWFydE51bWJlci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gUmVtb3ZlIEltYWdlIENhcmQgLy8gXG5cbiAgICBkZWxldGVJbWFnZSgpIHtcbiAgICAgICAgY29uc3QgdHJhc2hCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtY2FyZF9fdHJhc2hcIik7XG4gICAgICAgIHRyYXNoQnV0dG9uLmNsb3Nlc3QoXCIuaW1hZ2UtY2FyZFwiKS5yZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgdXBkYXRlTGlrZXMocmVzQXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpa2VzQXJyYXkgPSByZXNBcnJheTtcbiAgICB9XG5cblxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuaW1hZ2UtY2FyZF9faGVhcnQnKVxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl9saWtlc0FycmF5LnNvbWUobGlrZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaWtlLl9pZCA9PT0gdGhpcy5fdXNlclxuICAgICAgICAgICAgICAgIH0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VEZWxldGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHRoaXMuX2lkXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlTGlrZUFkZCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5faWRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbWFnZS1jYXJkX190cmFzaCcpXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2soe1xuICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy5faWRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmltYWdlLWNhcmRfX2ltYWdlJylcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh7XG4gICAgICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZSxcbiAgICAgICAgICAgICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgICAgICAgICAgfSkpO1xuXG5cbiAgICAgICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXIpIHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1jYXJkX190cmFzaFwiKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG5cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgICAgIGNvbnN0IGltYWdlQ2FyZEltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWNhcmRfX2ltYWdlXCIpO1xuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICBpbWFnZUNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICBpbWFnZUNhcmRJbWFnZS5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5fbmFtZSk7XG5cbiAgICAgICAgaWYgKHRoaXMuX2NhcmRMaWtlcyA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1jYXJkX19oZWFydC1udW1iZXJcIikudGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkTGlrZXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaW1hZ2UtY2FyZF9faGVhcnQtbnVtYmVyXCIpLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9saWtlc0FycmF5LnNvbWUobGlrZSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGhlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmltYWdlLWNhcmRfX2hlYXJ0XCIpO1xuICAgICAgICAgICAgaGVhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcImltYWdlLWNhcmRfX2hlYXJ0X2xpa2VkXCIpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBoZWFydEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1jYXJkX19oZWFydFwiKTtcbiAgICAgICAgICAgIGhlYXJ0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJpbWFnZS1jYXJkX19oZWFydF9saWtlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICAgIH1cblxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cERlbGV0ZUltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHtwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0LCBzdWJtaXRCdXR0b259KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDsgXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHN1Ym1pdEJ1dHRvbjsgIFxuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICBzZXRTdWJtaXRBY3Rpb24gKGFjdGlvbikge1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xuICAgIH1cblxuICAgIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nKSB7XG4gICAgICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX3N1Ym1pdEJ1dHRvbi5kYXRhc2V0LnRleHRjb250ZW50O1xuICAgIFxuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYm94X19idXR0b25cIikuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZyh0cnVlKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICAgICAgfSlcbiAgICB9XG5cbn0iLCJleHBvcnQgY29uc3QgcHJvZmlsZVRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3VidGl0bGVcIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xuXG5leHBvcnQgY29uc3Qgb3BlbkVkaXRGb3JtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcblxuZXhwb3J0IGNvbnN0IG9wZW5BZGRGb3JtQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tYWRkXCIpO1xuXG5leHBvcnQgY29uc3QgaW5wdXRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1ib3hfX2lucHV0X3R5cGVfdGl0bGVcIik7XG5cbmV4cG9ydCBjb25zdCBpbnB1dERlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWJveF9faW5wdXRfdHlwZV9kZXNjcmlwdGlvblwiKTtcblxuZXhwb3J0IGNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWJveF90eXBlX3Byb2ZpbGVcIik7XG5cbmV4cG9ydCBjb25zdCBmb3JtSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYm94X3R5cGVfaW1hZ2VcIik7XG5cbmV4cG9ydCBjb25zdCBmb3JtUHJvZmlsZUltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWJveF90eXBlX3Byb2ZpbGUtaW1hZ2VcIik7XG5cbmV4cG9ydCBjb25zdCBpbWFnZUNhcmRUZW1wbGF0ZSA9IFwiI2ltYWdlLWNhcmQtdGVtcGxhdGVcIjtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVJbWFnZU92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlLW92ZXJsYXlcIik7XG5cbmV4cG9ydCBjb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYm94X19idXR0b25cIik7XG5cbmV4cG9ydCBjb25zdCBhZGRDYXJkU3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWJveF9fYnV0dG9uX2FkZFwiKTtcblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRTdWJtaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtYm94X19idXR0b25fZGVsZXRlLWNhcmRcIik7XG5cbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZVN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1ib3hfX2J1dHRvbl9lZGl0XCIpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUltYWdlU3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWJveF9fYnV0dG9uX3Byb2ZpbGUtaW1hZ2VcIik7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWtlLWxvdWlzZS5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvYmFsZC1tb3VudGFpbnMuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIlxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3Zhbm9pc2UuanBnXCJcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCJcbiAgICB9XG5dO1xuXG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiBcIi5lZGl0LWJveFwiLFxuICAgIGZpZWxkc2V0U2VsZWN0b3I6IFwiLmVkaXQtYm94X19zZXRcIixcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5lZGl0LWJveF9faW5wdXRcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZWRpdC1ib3hfX2J1dHRvblwiLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZWRpdC1ib3hfX2J1dHRvbl9pbmFjdGl2ZVwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJlZGl0LWJveF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICAgIGVycm9yQ2xhc3M6IFwiZWRpdC1ib3hfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufSIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBQb3B1cERlbGV0ZUltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwRGVsZXRlSW1hZ2UuanNcIjtcbmltcG9ydCB7IHByb2ZpbGVUaXRsZSwgcHJvZmlsZURlc2NyaXB0aW9uLCBwcm9maWxlSW1hZ2UsIG9wZW5FZGl0Rm9ybUJ1dHRvbiwgb3BlbkFkZEZvcm1CdXR0b24sIGlucHV0VGl0bGUsIGlucHV0RGVzY3JpcHRpb24sIGluaXRpYWxDYXJkcywgc2V0dGluZ3MsIGZvcm1Qcm9maWxlLCBmb3JtSW1hZ2UsIGltYWdlQ2FyZFRlbXBsYXRlLCBwcm9maWxlSW1hZ2VPdmVybGF5LCBmb3JtUHJvZmlsZUltYWdlLCBhZGRDYXJkU3VibWl0QnV0dG9uLCBkZWxldGVDYXJkU3VibWl0QnV0dG9uLCBwcm9maWxlSW1hZ2VTdWJtaXRCdXR0b24sIGVkaXRQcm9maWxlU3VibWl0QnV0dG9uIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5cbmNvbnN0IHByb2ZpbGVNb2RhbFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtUHJvZmlsZSk7XG5cbmNvbnN0IGltYWdlTW9kYWxWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUltYWdlKTtcblxuY29uc3QgcHJvZmlsZUltYWdlTW9kYWxWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybVByb2ZpbGVJbWFnZSlcblxuXG5wcm9maWxlTW9kYWxWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5pbWFnZU1vZGFsVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxucHJvZmlsZUltYWdlTW9kYWxWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5cblxuXG5leHBvcnQgY29uc3QgaW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5pbWFnZS1leHBhbmRcIik7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuY29uc3QgZWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICAgIHBvcHVwU2VsZWN0b3I6ICcubW9kYWxfdHlwZV9lZGl0JyxcbiAgICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgICAgICBhcGkuc2V0VXNlckluZm8oeyBuYW1lOiBkYXRhLnVzZXJuYW1lLCBhYm91dDogZGF0YS51c2VyZGVzY3JpcHRpb24gfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXdVc2VyLnNldFVzZXJJbmZvKHsgdXNlcm5hbWU6IGRhdGEudXNlcm5hbWUsIHVzZXJkZXNjcmlwdGlvbjogZGF0YS51c2VyZGVzY3JpcHRpb259KTtcbiAgICAgICAgICAgICAgICBlZGl0UG9wdXAuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICB9LFxuICAgIHN1Ym1pdEJ1dHRvbjogZWRpdFByb2ZpbGVTdWJtaXRCdXR0b24sXG59KTtcbmVkaXRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5leHBvcnQgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VySW5mbyh7XG4gICAgdXNlck5hbWU6IHByb2ZpbGVUaXRsZSxcbiAgICB1c2VyRGVzY3JpcHRpb246IHByb2ZpbGVEZXNjcmlwdGlvbixcbiAgICB1c2VyQXZhdGFyOiBwcm9maWxlSW1hZ2UsXG59KTtcblxub3BlbkVkaXRGb3JtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgdXNlck5hbWUsIHVzZXJEZXNjcmlwdGlvbiB9ID0gbmV3VXNlci5nZXRVc2VySW5mbygpO1xuICAgIGlucHV0VGl0bGUudmFsdWUgPSB1c2VyTmFtZTtcbiAgICBpbnB1dERlc2NyaXB0aW9uLnZhbHVlID0gdXNlckRlc2NyaXB0aW9uO1xuICAgIGVkaXRQb3B1cC5vcGVuKCk7XG4gICAgcHJvZmlsZU1vZGFsVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xufSk7XG5cblxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICAgIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS9ncm91cC0xMlwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogXCJiZjZhOGM3OC1iMjQ1LTQ1OTQtODAxZC1mYTNiNTA1NjgyYzdcIixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICB9XG59KTtcblxuYXBpLmdldFVzZXJJbmZvKClcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBuZXdVc2VyLnNldFVzZXJJbmZvKHsgdXNlcm5hbWU6IHJlcy5uYW1lLCB1c2VyZGVzY3JpcHRpb246IHJlcy5hYm91dCB9KTtcbiAgICAgICAgbmV3VXNlci5zZXRVc2VyQXZhdGFyKHJlcy5hdmF0YXIpO1xuICAgICAgICBuZXdVc2VyLnVzZXJJZCA9IHJlcy5faWQ7XG4gICAgfSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGFwaS5nZXRDYXJkTGlzdCgpXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbXM6IHJlcyxcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJkc0xpc3QuYWRkQ2FyZHMoY2FyZEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgXCIuaW1hZ2UtZ3JpZFwiXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBjYXJkc0xpc3QucmVuZGVyZXIoKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgICAgICAgICAgICAgICAgICAgcG9wdXBTZWxlY3RvcjogJy5tb2RhbF90eXBlX2FkZCcsXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuYWRkQ2FyZChkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdDYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKG5ld0NhcmRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2FyZFBvcHVwLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0QnV0dG9uOiBhZGRDYXJkU3VibWl0QnV0dG9uLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAgICAgICAgICAgICBvcGVuQWRkRm9ybUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgaW1hZ2VNb2RhbFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cblxuY29uc3QgcHJvZmlsZUltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gICAgcG9wdXBTZWxlY3RvcjogJy5tb2RhbF90eXBlX3Byb2ZpbGUtaW1hZ2UnLFxuICAgIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgICAgIGNvbnN0IHsgcHJvZmlsZWltYWdlOiBhdmF0YXIgfSA9IGRhdGE7XG4gICAgICAgIGFwaS5zZXRVc2VyQXZhdGFyKGF2YXRhcilcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICBuZXdVc2VyLnNldFVzZXJBdmF0YXIoYXZhdGFyKTtcbiAgICAgICAgICAgICAgICBwcm9maWxlSW1hZ2VQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIH0sXG4gICAgc3VibWl0QnV0dG9uOiBwcm9maWxlSW1hZ2VTdWJtaXRCdXR0b24sXG59KTtcbnByb2ZpbGVJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuXG5wcm9maWxlSW1hZ2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHByb2ZpbGVJbWFnZVBvcHVwLm9wZW4oKTtcbiAgICBwcm9maWxlSW1hZ2VNb2RhbFZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbn0pXG5cblxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRQb3B1cCA9IG5ldyBQb3B1cERlbGV0ZUltYWdlKHtcbiAgICBwb3B1cFNlbGVjdG9yOiAnLm1vZGFsX3R5cGVfZGVsZXRlLWNhcmQnLFxuICAgIHN1Ym1pdEJ1dHRvbjogZGVsZXRlQ2FyZFN1Ym1pdEJ1dHRvbixcbn0pO1xuZGVsZXRlQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuZnVuY3Rpb24gY3JlYXRlQ2FyZChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgZGF0YSxcbiAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoeyBsaW5rLCBuYW1lIH0pID0+IHtcbiAgICAgICAgICAgIGltYWdlUG9wdXAub3Blbih7IGxpbmssIG5hbWUgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoeyBpZCB9KSA9PiB7XG4gICAgICAgICAgICBkZWxldGVDYXJkUG9wdXAub3BlbigpO1xuICAgICAgICAgICAgZGVsZXRlQ2FyZFBvcHVwLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXBpLnJlbW92ZUNhcmQoaWQpXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZUNhcmRQb3B1cC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FyZC5kZWxldGVJbWFnZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUxpa2VBZGQ6ICh7IGlkIH0pID0+IHtcbiAgICAgICAgICAgIGFwaS5hZGRMaWtlKGlkKVxuICAgICAgICAgICAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhcmQudXBkYXRlTGlrZXMocmVzLmxpa2VzKTtcbiAgICAgICAgICAgICAgICAgICAgY2FyZC5hZGRIZWFydCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVMaWtlRGVsZXRlOiAoeyBpZCB9KSA9PiB7XG4gICAgICAgICAgICBhcGkucmVtb3ZlTGlrZShpZClcbiAgICAgICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYXJkLnVwZGF0ZUxpa2VzKHJlcy5saWtlcyk7XG4gICAgICAgICAgICAgICAgICAgIGNhcmQucmVtb3ZlSGVhcnQoKTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgICAgfSxcbiAgICAgICAgdXNlcklkOiBuZXdVc2VyLnVzZXJJZCxcbiAgICB9LCBpbWFnZUNhcmRUZW1wbGF0ZSk7XG4gICAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==